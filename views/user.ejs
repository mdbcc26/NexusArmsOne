<!DOCTYPE html>
<html lang="en">
<head>
    <title>User Details</title>
    <link rel="stylesheet" href="/style.css">
    <script>
        function deleteUser() {
            if (confirm('Are you sure you want to delete this user?')) {
                fetch(`/users/<%= user.UserID %>/delete`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log(data.message); // Optional: Log success message
                        window.location.href = '/logout'; // Redirect to users list after deletion
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        // Handle error scenario if needed
                    });
            }
        }
    </script>
</head>
<body>
<div class="topnav">
    <a href="/">Home</a>
    <a href="/users">Users</a>
    <a href="/chat">Chat</a>
</div>
<br>
<div class="card">
    <h1>User Details</h1>
    <p><strong>Username:</strong> <%= user.Username %></p>
    <p><strong>Role:</strong> <%= user.Role %></p>
    <div>
        <h2>Loadout</h2>
        <div class="loadout">
            <div><strong>Weapon 1:</strong> <%= user.Weapon1 %></div>
            <div><strong>Weapon 2:</strong> <%= user.Weapon2 %></div>
            <div><strong>Armor:</strong> <%= user.Armor %></div>
        </div>
    </div>
    <div>
        <a href="/users/<%= user.UserID %>/edit">Edit User</a>
        <form id="deleteForm">
            <button type="button" onclick="deleteUser()">Delete User</button>
        </form>
    </div>
</div>
</body>
</html>
